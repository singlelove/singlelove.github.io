---
title: 中间件简介
date: 2019-07-22 17:25:15
tags: 学习
categories: 新知识
---

# nginx
## 定义
Nginx是一个http服务器。是一个使用c语言开发的高性能的http服务器及反向代理服务器。Nginx是一款高性能的http 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器。

## 应用场景
- http服务器，做静态服务器
- 虚拟主机：实现一台服务器虚拟出多个网站
- 反向代理，负载均衡

## 同类对比
### F5，硬件
- 优点：能够直接通过智能交换机实现,处理能力更强，而且与系统无关，负载性能强，更适用于一大堆设备、大访问量、简单应用。
- 缺点：成本高，除设备价格高昂，而且配置冗余，很难想象后面服务器做一个集群，但最关键的负载均衡设备却是单点配置，无法有效掌握服务器及应用状态。
硬件负载均衡，一般都不管实际系统与应用的状态，而只是从网络层来判断，所以有时候系统处理能力已经不行了，但网络可能还来得及反应（这种情况非常典型，比如应用服务器后面内存已经占用很多，但还没有彻底不行，如果网络传输量不大就未必在网络层能反映出来）

### Nginx，软负载
- 优点：基于系统与应用的负载均衡，能够更好地根据系统与应用的状况来分配负载。这对于复杂应用是很重要的，性价比高，实际上如果几台服务器，用F5之类的硬件产品显得有些浪费，而用软件就要合算得多，因为服务器同时还可以跑应用、做集群等。
- 缺点：负载能力受服务器本身性能的影响，性能越好，负载能力越大。

# redis
## 应用场景
- 性能：执行耗时久、结果不频繁变动的SQL，适合将结果放入redis缓存
- 并发：缓冲作用，避免大量请求直接访问数据库，引起连接异常

## 常见问题
- 缓存和数据库双写一致性问题
- 缓存雪崩问题
- 缓存击穿问题
- 缓存的并发竞争问题
参考[为什么我们做分布式使用 Redis ？](https://zhuanlan.zhihu.com/p/50392209)

# zookeeper
分布式协调系统，[参考](https://www.zhihu.com/question/35139415)

# 消息队列
Kafka、ActiveMQ、RabbitMQ、RocketMQ
## 应用场景
- 解耦：发布订阅模型，使系统与其他系统解耦
- 异步
- 削峰：请求先存入MQ，系统再定量去MQ中去取，避免大量请求直接是系统崩溃
[参考](https://www.javazhiyin.com/22897.html)

# couchbase
[参考](https://juejin.im/post/5ad53562f265da238b7e7f3c)

# Elasticsearch
简称ES，Elasticsearch是一个开源的高扩展的分布式全文检索引擎，它可以近乎实时的存储、检索数据；本身扩展性很好，可以扩展到上百台服务器，处理PB级别的数据。 
用Java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的RESTful API来隐藏Lucene的复杂性，从而让全文搜索变得简单。
[参考](https://my.oschina.net/90888/blog/1619325)

# FastDFS
- 文件与代码耦合，文件越多越混乱
- 静态文件访问会占用资源，影响服务器性能
轻量级分布式文件存储，[参考1](http://rdc.hundsun.com/portal/article/890.html)、[参考2](https://zhuanlan.zhihu.com/p/32798888)
